(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))e(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&e(g)}).observe(document,{childList:!0,subtree:!0});function i(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerPolicy&&(n.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?n.credentials="include":h.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(h){if(h.ep)return;h.ep=!0;const n=i(h);fetch(h.href,n)}})();const r=document.getElementById("canvas1"),t=r.getContext("2d");r.width=window.innerWidth;r.height=window.innerHeight;const w=document.getElementById("collisionCanvas"),m=w.getContext("2d");w.width=window.innerWidth;w.height=window.innerHeight;let y=!1,d=0;t.font="100px 'HALLOWEENN'";let u=0,v=500,x=0,o=[];class M{constructor(){this.spriteWidth=271,this.spriteHeight=194,this.sizeModifier=Math.random()*.4+.4,this.width=this.spriteWidth*this.sizeModifier,this.height=this.spriteHeight*this.sizeModifier,this.x=r.width,this.y=Math.random()*(r.height-this.height),this.directionX=Math.random()*5+3,this.directionY=Math.random()*5-2.5,this.stillOnScreen=!0,this.image=new Image,this.image.src="raven.png",this.frame=0,this.maxFrame=5,this.timeSinceFlap=0,this.flapInterval=300/this.directionX,this.randomColors=[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)],this.color="rgb("+this.randomColors[0]+","+this.randomColors[1]+","+this.randomColors[2]+")"}update(s){if((this.y<0||this.y>r.height-this.height)&&(this.directionY=this.directionY*-1),this.x-=this.directionX,this.y+=this.directionY,this.x<0-this.width&&(this.stillOnScreen=!1),this.timeSinceFlap+=s,this.timeSinceFlap>this.flapInterval){this.frame>=this.maxFrame?this.frame=0:this.frame++,this.timeSinceFlap=0;for(let i=0;i<3;i++)c.push(new L(this.x,this.y,this.width,this.color))}this.x<0-this.width&&(l.audio.play(),f--,f===0&&(y=!0))}draw(){m.fillStyle=this.color,m.fillRect(this.x,this.y,this.width,this.height),t.drawImage(this.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}}let p=[];class I{constructor(s,i,e){this.image=new Image,this.image.src="slash.png",this.spriteWidth=200,this.spriteHeight=179,this.x=s,this.y=i,this.size=e,this.frame=0,this.sound=new Audio,this.sound.src="sound"+Math.floor(Math.random()*2.99)+".wav",this.timeSinceLastFrame=0,this.frameInterval=200,this.stillOnScreen=!0}update(s){this.frame===0&&this.sound.play(),this.timeSinceLastFrame+=s,this.timeSinceLastFrame>this.frameInterval&&(this.frame++,this.frame>5&&(this.stillOnScreen=!1),this.timeSinceLastFrame=0)}draw(){t.drawImage(this.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y-this.size,this.size,this.size)}}let c=[];class L{constructor(s,i,e,h){this.size=e,this.x=s+e*.5,this.y=i+e*.3,this.radius=Math.random()*this.size*.1,this.maxRadius=Math.random()*20+25,this.stillOnScreen=!0,this.speedX=Math.random()*1+.5,this.color=h}update(){this.x+=this.speedX,this.radius+=.5,this.radius>this.maxRadius-5&&(this.stillOnScreen=!1)}draw(){t.save(),t.globalAlpha=1-this.radius/this.maxRadius,t.beginPath(),t.fillStyle="rgba(255, 255, 255)",t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fill(),t.restore()}}function C(){t.fillStyle="black",t.fillText(d+" CORVOS ",50,100),t.fillStyle="white",t.fillText(d+" CORVOS ",52.5,102.5)}let f=3;const R=6;class E{constructor(){this.spriteWidth=305,this.spriteHeight=320,this.imageScale=.6,this.width=this.spriteWidth*this.imageScale,this.height=this.spriteHeight*this.imageScale,this.image=new Image,this.image.src="life.png",this.x=r.width-200,this.y=-10,this.audio=new Audio,this.audio.src="crow.mp3"}}const l=new E;function F(){for(let a=0;a<f;a++)t.drawImage(l.image,l.x-a*80,l.y,l.width,l.height)}const S=new Image;S.src="game-over.png";function W(){t.fillStyle="rgba(255, 255, 255, 0.5)",t.beginPath(),t.roundRect(100,100,r.width-200,r.height-200,15),t.fill(),t.drawImage(S,r.width*.5-302,150),t.fillStyle="black",t.textAlign="center",t.font="50px 'HALLOWEENN'",t.fillText("MATOU "+d+" CORVOS... MAS FOI MORTO POR ELES",r.width*.5,r.height*.8)}window.addEventListener("click",function(a){const s=m.getImageData(a.x,a.y,1,1);console.log(s);const i=s.data;o.forEach(e=>{e.randomColors[0]===i[0]&&e.randomColors[1]===i[1]&&e.randomColors[2]===i[2]&&(e.stillOnScreen=!1,d++,d%10===0&&d!=0&&f<R&&f++,p.push(new I(e.x,e.y,e.width)))})});function O(a){t.clearRect(0,0,r.width,r.height),m.clearRect(0,0,r.width,r.height);let s=a-x;x=a,u+=s,u>v&&(o.push(new M),u=0,o.sort(function(i,e){return i.width-e.width})),C(),F(),[...c,...o,...p].forEach(i=>i.update(s)),[...c,...o,...p].forEach(i=>i.draw()),o=o.filter(i=>i.stillOnScreen),c=c.filter(i=>i.stillOnScreen),y?W():requestAnimationFrame(O)}O(0);
